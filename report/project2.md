# Project2.report

# تغییرات نسبت به سند اولیه
## ساعت زنگ‌دار بهینه
- کلیت این کار مانند موارد گفته‌شده در سند اولیه بود ولی در هنگام جلسه‌طراحی و پیاده‌سازی تغییرات زیر در آن صورت گرفت:
    1. به این دلیل که هر ریسه یا در حال اجرا است یا منتظر آزاد شدن یک قفل و یا خواب است، `struct list_elem sleep_element` ذکرشده در سند اولیه استفاده نشده و از همان `struct list_elem elem` موجود در ساختار `thread` استفاده‌شد.
    2. برای سادگی بیشتر، به جای استفاده از قفل در هنگام کار با لیست `sleep_list`، به خاموش‌کردن `interrupt`ها اکتفا شد.
    3. متغییر اضافی `next_thread_unblock_time` در سند `timer.c`  اضافه‌شد تا زمان بیدار شدن اولین ریسه را داشته‌باشیم و به این ترتیب مدت زمان کمتری در تابع `timer_interrupt` تلف شود و خوانایی کد افزایش یابد. مقدار این متغیر در هنگام خالی بودن `sleep_list` برابر با `INT64_MAX` است.

## زمان‌بند اولویت دار
- در تست‌ها ظاهرا لازم بود وقتی یک ترد جدید با اولویت بالا ساخته می‌شود، ترد فعلی بلافاصله yield کند. این در طراحی در نظر گرفته نشده بود. به این ترتیب در `thread_create` و زمانی که `sema_up` می‌کنیم این قابلیت اضافه شد که ترد فعلی yield کند تا اگر ترد با اولویت بیشتر بیدار یا ساخته شده باشد، بتواند اجرا شود.
- برای این که از دو بار yield کردن ترد فعلی جلوگیری شود، بر خلاف طراحی اولیه، به جای اینکه در `lock_release` از تابع `thread_set_eff_priority` استفاده شود، جداگانه effective_priority تغییر کرد.


# مسئولیت افراد

در این تمرین گروهی، علیرضا طباطباییان ساعت زنگ‌دار بهینه را به کمک رضا یاربخش پیاده‌سازی کرد. روزبه مشکین نژاد نیز با کمک علی بهجتی، طراحی زمان‌بند را انجام داد و آن را پیاده‌سازی کرد. ماموریت سوم پروژه هم توسط رضا یاربخش و علی بهجتی انجام شد.
در مجموع این پروژه به خوبی جلو رفت و از نظر زمان‌بندی و پیشرفت کار مشکلی مشاهده نشد.

